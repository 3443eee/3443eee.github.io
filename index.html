<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3443's hub</title>
<style>
/* --- GENERAL STYLES --- */
body {
  margin: 0;
  background-image: url('res/bg.png');
  background-repeat: repeat;
  background-size: auto;
  font-family: Arial, sans-serif;
  color: white;
}

/* --- TOP HEADER --- */
header.translucent {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  z-index: 1000;
}

/* --- SECONDARY HEADER --- */
header.secondary {
  position: fixed;
  top: 60px;
  left: 0;
  width: 100%;
  height: 40px;
  background-color: #222;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0;
  z-index: 999;
}

/* --- BUTTONS --- */
.left-buttons {
  display: flex;
  margin-left: 5px;
}
.left-buttons button, .right-button button, .contact-btn, .dev-button {
  margin-right: 6px;
  padding: 5px 15px;
  font-size: 14px;
  border: none;
  background-color: #444;
  color: white;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  border-radius: 0;
  display: flex;
  align-items: center;
  gap: 6px;
}
.left-buttons button:hover, .contact-btn:hover, .dev-button:hover {
  background-color: #666;
  transform: translateY(-1px);
}

.right-button {
  margin-right: 5px;
}
.right-button button {
  background-color: #4CAF50;
}
.right-button button:hover {
  background-color: #45a049;
  transform: translateY(-1px);
}

/* --- MAIN CONTENT --- */
main {
  padding-top: 100px;
  text-align: center;
}

/* --- PAGE SECTIONS --- */
.page {
  display: none;
  animation: fadeIn 0.25s ease;
  background-color: #1c1c1c;
  color: #fff;
  margin: 20px;
  padding: 40px;
  border: 1px solid #333;
  border-radius: 0;
}
.page.active {
  display: block;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

h2 {
  color: #fff;
  margin-bottom: 15px;
}
p {
  color: #ccc;
  margin-bottom: 1rem;
}

/* --- DEVELOPMENT CARDS --- */
.dev-card {
  background-color: #222;
  border: 1px solid #333;
  padding: 20px;
  margin: 20px auto;
  max-width: 600px;
  text-align: left;
  border-radius: 0;
}
.dev-title {
  font-size: 20px;
  margin-bottom: 10px;
  color: white;
}
.dev-desc {
  font-size: 14px;
  margin-bottom: 15px;
  color: #ccc;
}
.contact-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  width: 100%;
  gap: 8px;
  margin-top: 1rem;
}

/* --- POSTS CARDS --- */
.post-card {
  background-color: #222;
  border: 1px solid #333;
  padding: 30px;
  margin: 25px auto;
  max-width: 800px;
  text-align: left;
  border-radius: 0;
  position: relative;
}
.post-title {
  font-size: 24px;
  margin-bottom: 15px;
  color: white;
  font-weight: bold;
}
.post-content {
  font-size: 16px;
  color: #ccc;
  white-space: pre-wrap;
  line-height: 1.6;
  margin-bottom: 30px;
}
.post-date {
  position: absolute;
  bottom: 15px;
  right: 20px;
  font-size: 12px;
  color: #888;
  font-style: italic;
}

/* Loading message */
.loading {
  color: #ccc;
  font-size: 14px;
  margin: 20px;
}
</style>
</head>
<body>

<header class="translucent">3443's hub.</header>
<header class="secondary">
  <div class="left-buttons">
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('developments')">Developments</button>
    <button onclick="showPage('contact')">Contact</button>
  </div>
  <div class="right-button">
    <button onclick="showPage('donate')">Donate</button>
  </div>
</header>

<main>
  <!-- HOME PAGE WITH POSTS -->
  <section id="home" class="page active">
    <h2>Home</h2>
    <div id="posts-container">
      <div class="loading">Loading posts...</div>
    </div>
  </section>

  <!-- DEVELOPMENTS PAGE -->
  <section id="developments" class="page">
    <h2>Developments</h2>

    <div class="dev-card">
      <div class="dev-title">A03 Core resources.</div>
      <div class="dev-desc">A small site with a bunch of useful resources for the samsung A03 core, containing kernels, custom recoveries, ROM's, etc...</div>
      <button class="dev-button" onclick="location.href='A03coreresources'">View</button>
    </div>

    <div class="dev-card">
      <div class="dev-title">samsignrem</div>
      <div class="dev-desc">A cross-platoform program I made to zero out SignerVer02 signature blocks (commonly used in samsung firmwware files to check sw-rev) from any file/binary. This can help flash older or newer files to devices with an older or newer revision.</div>
      <button class="dev-button" onclick="window.open('https://github.com/3443eee/samsignrem', '_blank')">View</button>
    </div>

  </section>

  <!-- CONTACT PAGE -->
  <section id="contact" class="page">
    <h2>Contact Me</h2>
    <div class="contact-buttons">
      <button class="contact-btn" onclick="window.open('https://t.me/rantof3443', '_blank')">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/telegram.svg" style="width:20px;height:20px;filter:invert(1);"> Telegram group
      </button>
      <button class="contact-btn" onclick="window.open('https://discord.gg/6w2whwc4km', '_blank')">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" style="width:20px;height:20px;filter:invert(1);"> Discord server
      </button>
    </div>
    <div style="margin-top:1rem;color:#ccc;font-size:16px;text-align:center;">
      <p>Discord: adamiolona</p>
      <p>Matrix: @3443p:matrix.org</p>
      <p>Telegram: t.me/three443</p>
      <p>Mail: 3443p@proton.me</p>
      <p>XDA: xdaforums.com/m/3443.13261936/</p>
    </div>
  </section>

  <!-- DONATE PAGE -->
  <section id="donate" class="page">
    <h2>Donate</h2>
    <p>All donations are appreciated!</p>
    <p>|</p>
    <p>BTC: bc1qykjnr9hccqagqa3eeqtw874zugg4g5wq43k9sh</p>
    <p>ETH: 0xaE925960C0086d190d2Eb1E39b30F874605747Ca</p>
  </section>
</main>

<script>
// Page navigation function
function showPage(pageId) {
  const pages = document.querySelectorAll('.page');
  pages.forEach(page => {
    page.classList.remove('active');
  });
  const targetPage = document.getElementById(pageId);
  if (targetPage) {
    targetPage.classList.add('active');
  }
}

// Load posts dynamically
async function loadPosts() {
  const postsContainer = document.getElementById('posts-container');
  
  try {
    // Fetch the index.json file
    const indexResponse = await fetch('posts/index.json');
    if (!indexResponse.ok) {
      throw new Error('Could not load posts index');
    }
    
    const postFiles = await indexResponse.json();
    
    // Clear loading message
    postsContainer.innerHTML = '';
    
    // If no posts, show message
    if (!postFiles || postFiles.length === 0) {
      postsContainer.innerHTML = '<div class="loading">No posts available.</div>';
      return;
    }
    
    // Sort posts by timestamp (newest first)
    // Extract timestamp from filename (e.g., "1730138210.txt" -> 1730138210)
    const sortedPosts = postFiles.sort((a, b) => {
      const timeA = parseInt(a.split('.')[0]) || 0;
      const timeB = parseInt(b.split('.')[0]) || 0;
      return timeB - timeA; // Descending order (newest first)
    });
    
    // Load each post
    for (const filename of sortedPosts) {
      try {
        console.log(`Attempting to load: posts/${filename}`);
        const postResponse = await fetch(`posts/${filename}`);
        console.log(`Response status for ${filename}:`, postResponse.status);
        
        if (!postResponse.ok) {
          console.error(`Failed to load ${filename}: ${postResponse.status}`);
          continue;
        }
        
        const postText = await postResponse.text();
        console.log(`Loaded ${filename}, length:`, postText.length);
        
        const lines = postText.split('\n');
        const title = lines[0].trim();
        const content = lines.slice(1).join('\n').trim();
        
        // Extract timestamp from filename (e.g., "1730138210.txt")
        const timestamp = parseInt(filename.split('.')[0]);
        const postDate = new Date(timestamp * 1000); // Convert seconds to milliseconds
        
        // Format date and time
        const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
        const timeOptions = { hour: '2-digit', minute: '2-digit' };
        const formattedDate = postDate.toLocaleDateString('en-US', dateOptions);
        const formattedTime = postDate.toLocaleTimeString('en-US', timeOptions);
        const fullDateTime = `${formattedDate} at ${formattedTime}`;
        
        // Create post card
        const postCard = document.createElement('div');
        postCard.className = 'post-card';
        
        const postTitle = document.createElement('div');
        postTitle.className = 'post-title';
        postTitle.textContent = title;
        
        const postContent = document.createElement('div');
        postContent.className = 'post-content';
        postContent.textContent = content;
        
        const postDateElem = document.createElement('div');
        postDateElem.className = 'post-date';
        postDateElem.textContent = fullDateTime;
        
        postCard.appendChild(postTitle);
        postCard.appendChild(postContent);
        postCard.appendChild(postDateElem);
        postsContainer.appendChild(postCard);
        
      } catch (err) {
        console.error(`Error loading post ${filename}:`, err);
      }
    }
    
    // If no posts were loaded successfully
    if (postsContainer.children.length === 0) {
      postsContainer.innerHTML = '<div class="loading">No posts could be loaded.</div>';
    }
    
  } catch (error) {
    console.error('Error loading posts:', error);
    postsContainer.innerHTML = '<div class="loading">Error loading posts. Make sure posts/index.json exists.</div>';
  }
}

// Load posts when page loads
document.addEventListener('DOMContentLoaded', loadPosts);
</script>

</body>
</html>